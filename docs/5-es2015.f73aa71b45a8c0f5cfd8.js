(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{GAQx:function(t,e,n){"use strict";n.r(e);var i=n("PCNd"),r=n("kt0X"),a=n("tyNb"),s=n("fXoL");const o=function(){var t={EntitiesOnly:0,Both:1,None:2};return t[t.EntitiesOnly]="EntitiesOnly",t[t.Both]="Both",t[t.None]="None",t}();function c(t){return function(e,n){const i={ids:[...n.ids],entities:Object.assign({},n.entities)},r=t(e,i);return r===o.Both?Object.assign({},n,i):r===o.EntitiesOnly?Object.assign({},n,{entities:i.entities}):n}}function l(t,e){const n=e(t);return Object(s.V)()&&void 0===n&&console.warn("@ngrx/entity: The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",t,"The `selectId` implementation:",e.toString()),n}function u(t){function e(e,n){const i=l(e,t);return i in n.entities?o.None:(n.ids.push(i),n.entities[i]=e,o.Both)}function n(t,n){let i=!1;for(const r of t)i=e(r,n)!==o.None||i;return i?o.Both:o.None}function i(t,e){const n=(t instanceof Array?t:e.ids.filter(n=>t(e.entities[n]))).filter(t=>t in e.entities).map(t=>delete e.entities[t]).length>0;return n&&(e.ids=e.ids.filter(t=>t in e.entities)),n?o.Both:o.None}function r(e,n){const i={};return(e=e.filter(t=>t.id in n.entities)).length>0?e.filter(e=>(function(e,n,i){const r=Object.assign({},i.entities[n.id],n.changes),a=l(r,t),s=a!==n.id;return s&&(e[n.id]=a,delete i.entities[n.id]),i.entities[a]=r,s})(i,e,n)).length>0?(n.ids=n.ids.map(t=>i[t]||t),o.Both):o.EntitiesOnly:o.None}function a(e,i){const a=[],s=[];for(const n of e){const e=l(n,t);e in i.entities?s.push({id:e,changes:n}):a.push(n)}const c=r(s,i),u=n(a,i);switch(!0){case u===o.None&&c===o.None:return o.None;case u===o.Both||c===o.Both:return o.Both;default:return o.EntitiesOnly}}return{removeAll:function(t){return Object.assign({},t,{ids:[],entities:{}})},addOne:c(e),addMany:c(n),addAll:c((function(t,e){return e.ids=[],e.entities={},n(t,e),o.Both})),updateOne:c((function(t,e){return r([t],e)})),updateMany:c(r),upsertOne:c((function(t,e){return a([t],e)})),upsertMany:c(a),removeOne:c((function(t,e){return i([t],e)})),removeMany:c(i),map:c((function(t,e){return r(e.ids.reduce((n,i)=>{const r=t(e.entities[i]);return r!==e.entities[i]&&n.push({id:i,changes:r}),n},[]).filter(({id:t})=>t in e.entities),e)}))}}const h=Object(r.n)("[New Dataset Page] Add Dataset",Object(r.s)()),f=Object(r.n)("[Datasets API] Dataset Deleted",Object(r.s)()),d=function(t={}){const{selectId:e,sortComparer:n}=Object.assign({sortComparer:!1,selectId:t=>t.id},t),i={getInitialState:function(t={}){return Object.assign({ids:[],entities:{}},t)}},a={getSelectors:function(t){const e=t=>t.ids,n=t=>t.entities,i=Object(r.q)(e,n,(t,e)=>t.map(t=>e[t])),a=Object(r.q)(e,t=>t.length);return t?{selectIds:Object(r.q)(t,e),selectEntities:Object(r.q)(t,n),selectAll:Object(r.q)(t,i),selectTotal:Object(r.q)(t,a)}:{selectIds:e,selectEntities:n,selectAll:i,selectTotal:a}}},s=n?function(t,e){const{removeOne:n,removeMany:i,removeAll:r}=u(t);function a(e,n){const i=e.filter(e=>!(l(e,t)in n.entities));return 0===i.length?o.None:(f(i,n),o.Both)}function s(e,n){const i=[],r=e.filter(e=>(function(e,n,i){if(!(n.id in i.entities))return!1;const r=Object.assign({},i.entities[n.id],n.changes),a=l(r,t);return delete i.entities[n.id],e.push(r),a!==n.id})(i,e,n)).length>0;if(0===i.length)return o.None;{const t=n.ids,e=[];return n.ids=n.ids.filter((t,i)=>t in n.entities||(e.push(i),!1)),f(i,n),!r&&e.every(e=>n.ids[e]===t[e])?o.EntitiesOnly:o.Both}}function h(e,n){const i=[],r=[];for(const a of e){const e=l(a,t);e in n.entities?r.push({id:e,changes:a}):i.push(a)}const c=s(r,n),u=a(i,n);switch(!0){case u===o.None&&c===o.None:return o.None;case u===o.Both||c===o.Both:return o.Both;default:return o.EntitiesOnly}}function f(n,i){n.sort(e);const r=[];let a=0,s=0;for(;a<n.length&&s<i.ids.length;){const o=n[a],c=l(o,t),u=i.ids[s];e(o,i.entities[u])<=0?(r.push(c),a++):(r.push(u),s++)}i.ids=r.concat(a<n.length?n.slice(a).map(t):i.ids.slice(s)),n.forEach((e,n)=>{i.entities[t(e)]=e})}return{removeOne:n,removeMany:i,removeAll:r,addOne:c((function(t,e){return a([t],e)})),updateOne:c((function(t,e){return s([t],e)})),upsertOne:c((function(t,e){return h([t],e)})),addAll:c((function(t,e){return e.entities={},e.ids=[],a(t,e),o.Both})),addMany:c(a),updateMany:c(s),upsertMany:c(h),map:c((function(t,e){return s(e.ids.reduce((n,i)=>{const r=t(e.entities[i]);return r!==e.entities[i]&&n.push({id:i,changes:r}),n},[]),e)}))}}(e,n):u(e);return Object.assign({selectId:e,sortComparer:n},i,a,s)}(),m=d.getInitialState(),p=Object(r.p)(m,Object(r.r)(h,(t,{dataset:e})=>d.addOne(e,t)),Object(r.r)(f,(t,{id:e})=>d.removeOne(e,t)));function g(t,e){return p(t,e)}const{selectAll:b,selectIds:y}=d.getSelectors(),v=Object(r.o)("router");var w=Math.sqrt(50),x=Math.sqrt(10),_=Math.sqrt(2),k=function(t,e,n){var i,r,a,s,o=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((i=e<t)&&(r=t,t=e,e=r),0===(s=O(t,e,n))||!isFinite(s))return[];if(s>0)for(t=Math.ceil(t/s),e=Math.floor(e/s),a=new Array(r=Math.ceil(e-t+1));++o<r;)a[o]=(t+o)*s;else for(t=Math.floor(t*s),e=Math.ceil(e*s),a=new Array(r=Math.ceil(t-e+1));++o<r;)a[o]=(t-o)/s;return i&&a.reverse(),a};function O(t,e,n){var i=(e-t)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),a=i/Math.pow(10,r);return r>=0?(a>=w?10:a>=x?5:a>=_?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(a>=w?10:a>=x?5:a>=_?2:1)}var M,C,R=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},N=(1===(M=R).length&&(C=M,M=function(t,e){return R(C(t),e)}),{left:function(t,e,n,i){for(null==n&&(n=0),null==i&&(i=t.length);n<i;){var r=n+i>>>1;M(t[r],e)<0?n=r+1:i=r}return n},right:function(t,e,n,i){for(null==n&&(n=0),null==i&&(i=t.length);n<i;){var r=n+i>>>1;M(t[r],e)>0?i=r:n=r+1}return n}}).right,T=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function z(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function j(){}var S="\\s*([+-]?\\d+)\\s*",A="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",E="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",D=/^#([0-9a-f]{3,8})$/,P=new RegExp("^rgb\\("+[S,S,S]+"\\)$"),I=new RegExp("^rgb\\("+[E,E,E]+"\\)$"),q=new RegExp("^rgba\\("+[S,S,S,A]+"\\)$"),F=new RegExp("^rgba\\("+[E,E,E,A]+"\\)$"),L=new RegExp("^hsl\\("+[A,E,E]+"\\)$"),$=new RegExp("^hsla\\("+[A,E,E,A]+"\\)$"),B={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function H(){return this.rgb().formatHex()}function U(){return this.rgb().formatRgb()}function Q(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=D.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?X(e):3===n?new K(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?new K(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?new K(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=P.exec(t))?new K(e[1],e[2],e[3],1):(e=I.exec(t))?new K(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=q.exec(t))?V(e[1],e[2],e[3],e[4]):(e=F.exec(t))?V(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=L.exec(t))?Z(e[1],e[2]/100,e[3]/100,1):(e=$.exec(t))?Z(e[1],e[2]/100,e[3]/100,e[4]):B.hasOwnProperty(t)?X(B[t]):"transparent"===t?new K(NaN,NaN,NaN,0):null}function X(t){return new K(t>>16&255,t>>8&255,255&t,1)}function V(t,e,n,i){return i<=0&&(t=e=n=NaN),new K(t,e,n,i)}function G(t,e,n,i){return 1===arguments.length?((r=t)instanceof j||(r=Q(r)),r?new K((r=r.rgb()).r,r.g,r.b,r.opacity):new K):new K(t,e,n,null==i?1:i);var r}function K(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function Y(){return"#"+J(this.r)+J(this.g)+J(this.b)}function W(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function J(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Z(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new et(t,e,n,i)}function tt(t){if(t instanceof et)return new et(t.h,t.s,t.l,t.opacity);if(t instanceof j||(t=Q(t)),!t)return new et;if(t instanceof et)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),a=Math.max(e,n,i),s=NaN,o=a-r,c=(a+r)/2;return o?(s=e===a?(n-i)/o+6*(n<i):n===a?(i-e)/o+2:(e-n)/o+4,o/=c<.5?a+r:2-a-r,s*=60):o=c>0&&c<1?0:s,new et(s,o,c,t.opacity)}function et(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function nt(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function it(t,e,n,i,r){var a=t*t,s=a*t;return((1-3*t+3*a-s)*e+(4-6*a+3*s)*n+(1+3*t+3*a-3*s)*i+s*r)/6}T(j,Q,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:H,formatHex:H,formatHsl:function(){return tt(this).formatHsl()},formatRgb:U,toString:U}),T(K,G,z(j,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new K(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new K(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Y,formatHex:Y,formatRgb:W,toString:W})),T(et,(function(t,e,n,i){return 1===arguments.length?tt(t):new et(t,e,n,null==i?1:i)}),z(j,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new et(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new et(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new K(nt(t>=240?t-240:t+120,r,i),nt(t,r,i),nt(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var rt=function(t){return function(){return t}};function at(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):rt(isNaN(t)?e:t)}var st=function t(e){var n=function(t){return 1==(t=+t)?at:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):rt(isNaN(e)?n:e)}}(e);function i(t,e){var i=n((t=G(t)).r,(e=G(e)).r),r=n(t.g,e.g),a=n(t.b,e.b),s=at(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=a(e),t.opacity=s(e),t+""}}return i.gamma=t,i}(1);function ot(t){return function(e){var n,i,r=e.length,a=new Array(r),s=new Array(r),o=new Array(r);for(n=0;n<r;++n)i=G(e[n]),a[n]=i.r||0,s[n]=i.g||0,o[n]=i.b||0;return a=t(a),s=t(s),o=t(o),i.opacity=1,function(t){return i.r=a(t),i.g=s(t),i.b=o(t),i+""}}}ot((function(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],a=t[i+1];return it((n-i/e)*e,i>0?t[i-1]:2*r-a,r,a,i<e-1?t[i+2]:2*a-r)}})),ot((function(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e);return it((n-i/e)*e,t[(i+e-1)%e],t[i%e],t[(i+1)%e],t[(i+2)%e])}}));var ct=function(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,r=e.slice();return function(a){for(n=0;n<i;++n)r[n]=t[n]*(1-a)+e[n]*a;return r}};function lt(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,a=new Array(r),s=new Array(i);for(n=0;n<r;++n)a[n]=gt(t[n],e[n]);for(;n<i;++n)s[n]=e[n];return function(t){for(n=0;n<r;++n)s[n]=a[n](t);return s}}var ut=function(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}},ht=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}},ft=function(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=gt(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}},dt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mt=new RegExp(dt.source,"g"),pt=function(t,e){var n,i,r,a=dt.lastIndex=mt.lastIndex=0,s=-1,o=[],c=[];for(t+="",e+="";(n=dt.exec(t))&&(i=mt.exec(e));)(r=i.index)>a&&(r=e.slice(a,r),o[s]?o[s]+=r:o[++s]=r),(n=n[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:ht(n,i)})),a=mt.lastIndex;return a<e.length&&(r=e.slice(a),o[s]?o[s]+=r:o[++s]=r),o.length<2?c[0]?function(t){return function(e){return t(e)+""}}(c[0].x):function(t){return function(){return t}}(e):(e=c.length,function(t){for(var n,i=0;i<e;++i)o[(n=c[i]).i]=n.x(t);return o.join("")})},gt=function(t,e){var n,i,r=typeof e;return null==e||"boolean"===r?rt(e):("number"===r?ht:"string"===r?(n=Q(e))?(e=n,st):pt:e instanceof Q?st:e instanceof Date?ut:(i=e,!ArrayBuffer.isView(i)||i instanceof DataView?Array.isArray(e)?lt:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?ft:ht:ct))(t,e)},bt=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}},yt=function(t){return function(){return t}},vt=function(t){return+t},wt=[0,1];function xt(t){return t}function _t(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:yt(isNaN(e)?NaN:.5)}function kt(t,e,n){var i=t[0],r=t[1],a=e[0],s=e[1];return r<i?(i=_t(r,i),a=n(s,a)):(i=_t(i,r),a=n(a,s)),function(t){return a(i(t))}}function Ot(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),a=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)r[s]=_t(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(e){var n=N(t,e,1,i)-1;return a[n](r[n](e))}}function Mt(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var Ct=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Rt(t){if(!(e=Ct.exec(t)))throw new Error("invalid format: "+t);var e;return new Nt({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Nt(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}Rt.prototype=Nt.prototype,Nt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Tt,zt,jt,St,At=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]},Et=function(t){return(t=At(Math.abs(t)))?t[1]:NaN},Dt=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(r>0){if(!+t[i])break t;r=0}}return r>0?t.slice(0,r)+t.slice(e+1):t},Pt=function(t,e){var n=At(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")},It={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Pt(100*t,e)},r:Pt,s:function(t,e){var n=At(t,e);if(!n)return t+"";var i=n[0],r=n[1],a=r-(Tt=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,s=i.length;return a===s?i:a>s?i+new Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+At(t,Math.max(0,e+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},qt=function(t){return t},Ft=Array.prototype.map,Lt=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];zt=function(t){var e,n,i=void 0===t.grouping||void 0===t.thousands?qt:(e=Ft.call(t.grouping,Number),n=t.thousands+"",function(t,i){for(var r=t.length,a=[],s=0,o=e[0],c=0;r>0&&o>0&&(c+o+1>i&&(o=Math.max(1,i-c)),a.push(t.substring(r-=o,r+o)),!((c+=o+1)>i));)o=e[s=(s+1)%e.length];return a.reverse().join(n)}),r=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",s=void 0===t.decimal?".":t.decimal+"",o=void 0===t.numerals?qt:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Ft.call(t.numerals,String)),c=void 0===t.percent?"%":t.percent+"",l=void 0===t.minus?"-":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=Rt(t)).fill,n=t.align,h=t.sign,f=t.symbol,d=t.zero,m=t.width,p=t.comma,g=t.precision,b=t.trim,y=t.type;"n"===y?(p=!0,y="g"):It[y]||(void 0===g&&(g=12),b=!0,y="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var v="$"===f?r:"#"===f&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",w="$"===f?a:/[%p]/.test(y)?c:"",x=It[y],_=/[defgprs%]/.test(y);function k(t){var r,a,c,f=v,k=w;if("c"===y)k=x(t)+k,t="";else{var O=(t=+t)<0;if(t=isNaN(t)?u:x(Math.abs(t),g),b&&(t=Dt(t)),O&&0==+t&&(O=!1),f=(O?"("===h?h:l:"-"===h||"("===h?"":h)+f,k=("s"===y?Lt[8+Tt/3]:"")+k+(O&&"("===h?")":""),_)for(r=-1,a=t.length;++r<a;)if(48>(c=t.charCodeAt(r))||c>57){k=(46===c?s+t.slice(r+1):t.slice(r))+k,t=t.slice(0,r);break}}p&&!d&&(t=i(t,1/0));var M=f.length+t.length+k.length,C=M<m?new Array(m-M+1).join(e):"";switch(p&&d&&(t=i(C+t,C.length?m-k.length:1/0),C=""),n){case"<":t=f+t+k+C;break;case"=":t=f+C+t+k;break;case"^":t=C.slice(0,M=C.length>>1)+f+t+k+C.slice(M);break;default:t=C+f+t+k}return o(t)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),k.toString=function(){return t+""},k}return{format:h,formatPrefix:function(t,e){var n=h(((t=Rt(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(Et(e)/3))),r=Math.pow(10,-i),a=Lt[8+i/3];return function(t){return n(r*t)+a}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),jt=zt.format,St=zt.formatPrefix;var $t=function(t,e,n,i){var r,a=function(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),a=i/r;return a>=w?r*=10:a>=x?r*=5:a>=_&&(r*=2),e<t?-r:r}(t,e,n);switch((i=Rt(null==i?",f":i)).type){case"s":var s=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Et(e)/3)))-Et(Math.abs(t)))}(a,s))||(i.precision=r),St(i,s);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Et(e)-Et(t))+1}(a,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=function(t){return Math.max(0,-Et(Math.abs(t)))}(a))||(i.precision=r-2*("%"===i.type))}return jt(i)};const Bt=Object(r.o)("datasets"),Ht=Object(r.q)(Bt,b),Ut=Object(r.q)(v,Bt,(t,e)=>e.entities[t.state.params.datasetId]),Qt=Object(r.q)(v,Ut,(t,e)=>e?e.columns[t.state.params.columnId]:null),Xt=Object(r.q)(Qt,t=>t?function(t){let e=Math.max(...[...t.continuous,...t.categorical].map(t=>t.frequency));const n=Math.pow(10,Math.floor(Math.log10(e)-1));e=Math.ceil(e/n)*n;const i=function t(){var e=function(){var t,e,n,i,r,a,s=wt,o=wt,c=gt,l=xt;function u(){var t,e,n,c=Math.min(s.length,o.length);return l!==xt&&((t=s[0])>(e=s[c-1])&&(n=t,t=e,e=n),l=function(n){return Math.max(t,Math.min(e,n))}),i=c>2?Ot:kt,r=a=null,h}function h(e){return isNaN(e=+e)?n:(r||(r=i(s.map(t),o,c)))(t(l(e)))}return h.invert=function(n){return l(e((a||(a=i(o,s.map(t),ht)))(n)))},h.domain=function(t){return arguments.length?(s=Array.from(t,vt),u()):s.slice()},h.range=function(t){return arguments.length?(o=Array.from(t),u()):o.slice()},h.rangeRound=function(t){return o=Array.from(t),c=bt,u()},h.clamp=function(t){return arguments.length?(l=!!t||xt,u()):l!==xt},h.interpolate=function(t){return arguments.length?(c=t,u()):c},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,i){return t=n,e=i,u()}}()(xt,xt);return e.copy=function(){return n=e,t().domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown());var n},Mt.apply(e,arguments),function(t){var e=t.domain;return t.ticks=function(t){var n=e();return k(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var i=e();return $t(i[0],i[i.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var i,r=e(),a=0,s=r.length-1,o=r[a],c=r[s];return c<o&&(i=o,o=c,c=i,i=a,a=s,s=i),(i=O(o,c,n))>0?i=O(o=Math.floor(o/i)*i,c=Math.ceil(c/i)*i,n):i<0&&(i=O(o=Math.ceil(o*i)/i,c=Math.floor(c*i)/i,n)),i>0?(r[a]=Math.floor(o/i)*i,r[s]=Math.ceil(c/i)*i,e(r)):i<0&&(r[a]=Math.ceil(o*i)/i,r[s]=Math.floor(c*i)/i,e(r)),t},t}(e)}().domain([0,e]).range([0,100]),r=i.ticks(10).map(t=>({value:t,position:100-i(t)})),a=t.continuous&&t.continuous.length?t.continuous.map(({lowerBound:t,upperBound:e,frequency:n})=>({lowerBound:t,upperBound:e,values:[{frequency:n,height:i(n)}]})):null,s=t.categorical&&t.categorical.length?t.categorical.map(({value:t,frequency:e})=>({label:t,values:[{frequency:e,height:i(e)}]})):null;return{series:[{label:"Frequency",color:"var(--dsPrimary100)"}],yMax:e,yTicks:r,yLabel:"Frequency",xLabel:"",columnCount:t.categorical.length+t.continuous.length,histogram:a,categories:s}}(t.values):null),Vt=Object(r.q)(Bt,y),Gt=Object(r.q)(Vt,t=>Math.max(0,...t)+1);var Kt=n("ofXK"),Yt=n("MSSf"),Wt=n("TY1r"),Jt=n("Xlwt"),Zt=n("UBeX");const te=function(t){return[t]};function ee(t,e){if(1&t){const t=s.Ub();s.Tb(0,"mat-card"),s.Tb(1,"mat-card-header"),s.Tb(2,"div",1),s.Tb(3,"mat-icon",2),s.zc(4,"description"),s.Rb(),s.Rb(),s.Tb(5,"mat-card-title"),s.zc(6),s.Rb(),s.Tb(7,"mat-card-subtitle"),s.Tb(8,"div"),s.zc(9),s.gc(10,"fileSize"),s.Rb(),s.Tb(11,"div"),s.zc(12),s.gc(13,"date"),s.Rb(),s.Rb(),s.Rb(),s.Tb(14,"mat-card-actions"),s.Tb(15,"button",3),s.bc("click",(function(n){s.sc(t);const i=e.$implicit;return s.fc().deleteDataset(i)})),s.zc(16,"Delete"),s.Rb(),s.Tb(17,"a",4),s.zc(18),s.Rb(),s.Rb(),s.Rb()}if(2&t){const t=e.$implicit;s.zb(6),s.Ac(t.filename),s.zb(3),s.Ac(s.hc(10,5,t.size)),s.zb(3),s.Ac(s.ic(13,7,t.created,"short")),s.zb(5),s.lc("routerLink",s.nc(10,te,t.id)),s.zb(1),s.Bc("",t.columns.length," Columns")}}let ne=(()=>{class t{constructor(t){this.store=t,this.datasets$=null,this.datasets$=this.store.select(Ht)}deleteDataset(t){this.store.dispatch(f({id:t.id}))}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(r.h))},t.\u0275cmp=s.Gb({type:t,selectors:[["ds-home"]],decls:2,vars:3,consts:[[4,"ngFor","ngForOf"],["mat-card-avatar",""],["color","primary"],["mat-stroked-button","","color","warn",3,"click"],["mat-stroked-button","","color","primary",1,"view-features",3,"routerLink"]],template:function(t,e){1&t&&(s.yc(0,ee,19,12,"mat-card",0),s.gc(1,"async")),2&t&&s.lc("ngForOf",s.hc(1,1,e.datasets$))},directives:[Kt.l,Yt.a,Yt.d,Yt.c,Wt.a,Yt.g,Yt.f,Yt.b,Jt.b,Jt.a,a.g],pipes:[Kt.b,Zt.a,Kt.e],styles:["[_nghost-%COMP%]{padding:24px;display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));grid-gap:24px}.view-features[_ngcontent-%COMP%]{margin-left:8px}mat-icon[_ngcontent-%COMP%]{font-size:38px}"]}),t})();var ie=function(t){return t.Alphanumeric="Alphanumeric",t.Numeric="Numeric",t.Mixed="Mixed",t}({});const re=1e3;var ae=n("tmTa");function se(t,e){1&t&&(s.Tb(0,"th",13),s.zc(1,"Name"),s.Rb())}function oe(t,e){if(1&t&&(s.Tb(0,"td",14),s.zc(1),s.Rb()),2&t){const t=e.$implicit;s.zb(1),s.Ac(t.name)}}function ce(t,e){1&t&&(s.Tb(0,"th",13),s.zc(1,"Type"),s.Rb())}function le(t,e){if(1&t&&(s.Tb(0,"td",14),s.zc(1),s.Rb()),2&t){const t=e.$implicit;s.zb(1),s.Ac(t.type)}}function ue(t,e){1&t&&(s.Tb(0,"th",13),s.zc(1,"Unique Values"),s.Rb())}function he(t,e){if(1&t&&(s.Tb(0,"td",14),s.zc(1),s.gc(2,"number"),s.gc(3,"number"),s.Rb()),2&t){const t=e.$implicit,n=s.fc();s.zb(1),s.Bc(" ",t.stats.exceededUniqueLimit?"> "+s.hc(2,1,n.uniqueLimit):s.hc(3,3,t.stats.uniqueCount)," ")}}function fe(t,e){1&t&&(s.Tb(0,"th",15),s.zc(1,"Min"),s.Rb())}function de(t,e){if(1&t&&(s.Tb(0,"td",16),s.zc(1),s.gc(2,"number"),s.Rb()),2&t){const t=e.$implicit,n=s.fc();s.zb(1),s.Bc(" ",t.type==n.ColumnType.Alphanumeric?"N/A":s.ic(2,1,t.stats.min,"1.0-2")," ")}}function me(t,e){1&t&&(s.Tb(0,"th",15),s.zc(1," Max "),s.Rb())}function pe(t,e){if(1&t&&(s.Tb(0,"td",16),s.zc(1),s.gc(2,"number"),s.Rb()),2&t){const t=e.$implicit,n=s.fc();s.zb(1),s.Bc(" ",t.type==n.ColumnType.Alphanumeric?"N/A":s.ic(2,1,t.stats.max,"1.0-2")," ")}}function ge(t,e){1&t&&(s.Tb(0,"th",15),s.zc(1," Avg. "),s.Rb())}function be(t,e){if(1&t&&(s.Tb(0,"td",16),s.zc(1),s.gc(2,"number"),s.Rb()),2&t){const t=e.$implicit,n=s.fc();s.zb(1),s.Bc(" ",t.type==n.ColumnType.Alphanumeric?"N/A":s.ic(2,1,t.stats.avg,"1.0-2")," ")}}function ye(t,e){1&t&&s.Nb(0,"tr",17)}const ve=function(t){return["column",t]};function we(t,e){1&t&&s.Nb(0,"tr",18),2&t&&s.lc("routerLink",s.nc(1,ve,e.index))}let xe=(()=>{class t{constructor(){this.columns=null,this.ColumnType=ie,this.uniqueLimit=re,this.displayedColumns=["name","type","unique","min","max","avg"]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Gb({type:t,selectors:[["ds-columns-table"]],inputs:{columns:"columns"},decls:21,vars:4,consts:[["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","type"],["matColumnDef","unique"],["matColumnDef","min"],["mat-header-cell","","class","num",4,"matHeaderCellDef"],["mat-cell","","class","num",4,"matCellDef"],["matColumnDef","max"],["matColumnDef","avg"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"routerLink",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"num"],["mat-cell","",1,"num"],["mat-header-row",""],["mat-row","",3,"routerLink"]],template:function(t,e){1&t&&(s.Tb(0,"table",0),s.Qb(1,1),s.yc(2,se,2,0,"th",2),s.yc(3,oe,2,1,"td",3),s.Pb(),s.Qb(4,4),s.yc(5,ce,2,0,"th",2),s.yc(6,le,2,1,"td",3),s.Pb(),s.Qb(7,5),s.yc(8,ue,2,0,"th",2),s.yc(9,he,4,5,"td",3),s.Pb(),s.Qb(10,6),s.yc(11,fe,2,0,"th",7),s.yc(12,de,3,4,"td",8),s.Pb(),s.Qb(13,9),s.yc(14,me,2,0,"th",7),s.yc(15,pe,3,4,"td",8),s.Pb(),s.Qb(16,10),s.yc(17,ge,2,0,"th",7),s.yc(18,be,3,4,"td",8),s.Pb(),s.yc(19,ye,1,0,"tr",11),s.yc(20,we,1,3,"tr",12),s.Rb()),2&t&&(s.lc("dataSource",e.columns),s.zb(19),s.lc("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),s.zb(1),s.lc("matRowDefColumns",e.displayedColumns))},directives:[ae.j,ae.c,ae.e,ae.b,ae.g,ae.i,ae.d,ae.a,ae.f,ae.h,a.f],pipes:[Kt.f],styles:["[_nghost-%COMP%]{overflow:auto}table[_ngcontent-%COMP%]{width:100%}.num[_ngcontent-%COMP%]{text-align:right}"],changeDetection:0}),t})(),_e=(()=>{class t{constructor(t){this.store=t,this.dataset$=this.store.select(Ut)}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(r.h))},t.\u0275cmp=s.Gb({type:t,selectors:[["ds-dataset"]],decls:8,vars:6,consts:[[1,"mat-h2"],["mat-icon-button","","routerLink","..",1,"back"],["color","accent"],[3,"columns"]],template:function(t,e){1&t&&(s.Tb(0,"h2",0),s.Tb(1,"a",1),s.Tb(2,"mat-icon",2),s.zc(3,"arrow_back"),s.Rb(),s.Rb(),s.zc(4),s.gc(5,"async"),s.Rb(),s.Nb(6,"ds-columns-table",3),s.gc(7,"async")),2&t&&(s.zb(4),s.Bc(" ",s.hc(5,2,e.dataset$).filename," "),s.zb(2),s.lc("columns",s.hc(7,4,e.dataset$).columns))},directives:[Jt.a,a.g,Wt.a,xe],pipes:[Kt.b],styles:["[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:stretch;align-items:stretch}ds-columns-table[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1}h2[_ngcontent-%COMP%]{margin:0;border-bottom:1px solid #ccc;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;flex-shrink:0;padding:12px}h2[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{margin-right:8px}"]}),t})();const ke=Object(r.n)("[New Dataset] File Chosen",Object(r.s)()),Oe=Object(r.n)("[New Dataset] Load File Error",Object(r.s)()),Me=Object(r.n)("[New Dataset] File Previewed",Object(r.s)()),Ce=Object(r.n)("[New Dataset] Create Dataset"),Re=Object(r.n)("[New Dataset] Column Toggled",Object(r.s)()),Ne=Object(r.n)("[New Dataset] Clear File"),Te=Object(r.p)({file:null,filePreview:null,filePreviewError:null,columns:[]},Object(r.r)(ke,(t,{file:e})=>Object.assign(Object.assign({},t),{file:e})),Object(r.r)(Me,(t,{result:e})=>Object.assign(Object.assign({},t),{filePreview:e,columns:e.meta.fields.map(t=>({name:t,included:!0}))})),Object(r.r)(Ne,t=>Object.assign(Object.assign({},t),{file:null,filePreview:null,columns:[]})),Object(r.r)(Re,(t,{index:e})=>Object.assign(Object.assign({},t),{columns:t.columns.map((t,n)=>n!==e?t:{name:t.name,included:!t.included})})));function ze(t,e){return Te(t,e)}var je=n("snw9"),Se=n("eIep"),Ae=n("zp1y"),Ee=n("bOdf"),De=n("5+tZ"),Pe=n("nYR2"),Ie=n("HDdC"),qe=n("LRne"),Fe=n("EY2u"),Le=n("NpuA");const $e=Object(r.o)("newDataset"),Be=Object(r.q)($e,t=>t.filePreview),He=Object(r.q)($e,t=>t.columns),Ue=Object(r.q)($e,t=>t.file);function Qe(t,{hasHeader:e,columns:n},i){return new Ie.a(r=>{Object(Le.parse)(t,{chunk:t=>{let r=0,a=t.data.length;e&&(r=1);for(let e=r;e<a;e++){const r=t.data[e];i.row(r);for(let t=0;t<n.length;t++)i.value(t,r[n[t]])}},complete:()=>{r.next(i.finished()),r.complete()},skipEmptyLines:!0})})}class Xe{constructor(){this.numeric=new Set,this.alphanumeric=new Set}get size(){return this.numeric.size+this.alphanumeric.size}add(t,e){this.size<re&&(e?this.numeric:this.alphanumeric).add(t)}}class Ve{constructor(t){this.index=t,this.min=Number.POSITIVE_INFINITY,this.max=Number.NEGATIVE_INFINITY,this.avg=0,this.isNumeric=!0,this.isAlphanumeric=!0,this.uniqueValues={numeric:0,alphanumeric:0,exceededLimit:!1}}toString(){return`Column ${this.index}: Min(${this.min}), Max(${this.max}), Avg(${this.avg}, Unq(${this.uniqueValues}))`}}class Ge{constructor(t){this.total=0,this.columns=Array.from({length:t},(t,e)=>new Ve(e)),this.uniques=Array.from({length:t},()=>new Xe)}value(t,e){const n=this.columns[t],i=Number.parseFloat(e),r=!Number.isNaN(i);r?(n.min=Math.min(n.min,i),n.max=Math.max(n.max,i),n.avg+=i,n.isAlphanumeric=!1):n.isNumeric=!1,this.uniques[t].add(e,r)}row(t){this.total++}finished(){return this.columns.forEach((t,e)=>{t.avg/=this.total,t.uniqueValues={alphanumeric:this.uniques[e].alphanumeric.size,numeric:this.uniques[e].numeric.size,exceededLimit:this.uniques[e].size>=re}}),this.columns}toString(){return this.columns.map(t=>t.toString()).join("\n")}}var Ke=function(t){return t[t.BIN=0]="BIN",t[t.CHART=1]="CHART",t}({});class Ye{constructor(t){this.column=t,this.categories={},this.bins=[],this.range=0,this.chartAlphanumeric=t.uniqueValues.alphanumeric<=200,this.numericStrategy=t.uniqueValues.numeric<20?Ke.CHART:Ke.BIN,this.numericStrategy===Ke.BIN&&(this.range=t.max-t.min,this.bins=Array.from({length:20},(e,n)=>({lowerBound:t.min+n*(this.range/20),upperBound:t.min+(n+1)*(this.range/20),frequency:0})))}addNumeric(t){if(this.numericStrategy===Ke.BIN){let e=Math.floor((t-this.column.min)/this.range*20);20===e&&(e=19),this.bins[e].frequency+=1}else{let e=t.toString();this.categories[e]=(this.categories[e]||0)+1}}addAlphanumeric(t){t=function(t="[blank]"){return""===t?"[blank]":t}(t),this.categories[t]=(this.categories[t]||0)+1}}class We{constructor(t){this.columns=t.map(t=>new Ye(t))}value(t,e){let n=Number.parseFloat(e);Number.isNaN(n)?this.columns[t].addAlphanumeric(e):this.columns[t].addNumeric(n)}row(t){}finished(){return this.columns.map(t=>({continuous:t.bins,categorical:Array.from(Object.entries(t.categories)).map(([t,e])=>({value:t,frequency:e}))}))}}function Je(t){return t.isAlphanumeric?ie.Alphanumeric:t.isNumeric?ie.Numeric:ie.Mixed}function Ze(t,e,n,i,r){return{id:t,filename:e.name,size:e.size,created:Date.now(),columns:n.filter(t=>t.included).map((t,e)=>({name:t.name,type:Je(i[e]),stats:{min:i[e].min,max:i[e].max,avg:i[e].avg,uniqueCount:i[e].uniqueValues.numeric+i[e].uniqueValues.alphanumeric,exceededUniqueLimit:i[e].uniqueValues.exceededLimit},values:r[e]}))}}let tn=(()=>{class t{constructor(t,e,n){this.actions$=t,this.store=e,this.router=n,this.previewFile$=Object(je.e)(()=>this.actions$.pipe(Object(je.f)(ke),Object(Se.a)(({file:t})=>new Ie.a(e=>{Object(Le.parse)(t,{header:!0,preview:10,error:t=>{e.next(Oe({error:t}))},complete:t=>{e.next(Me({result:t}))}})})))),this.saveDataset$=Object(je.e)(()=>this.actions$.pipe(Object(je.f)(Ce),Object(Ae.a)(this.store.select(Ue),this.store.select(He),this.store.select(Gt)),Object(Ee.a)(([t,e,n,i])=>{if(e&&n){const t=n.reduce((t,e,n)=>t.concat(e.included?[n]:[]),[]),r=new Ge(t.length);return Qe(e,{hasHeader:!0,columns:t},r).pipe(Object(De.a)(r=>{const a=new We(r);return Qe(e,{hasHeader:!0,columns:t},a).pipe(Object(De.a)(t=>Object(qe.a)(h({dataset:Ze(i,e,n,r,t)})).pipe(Object(Pe.a)(()=>{this.router.navigate(["/datasets",i])}))))}))}return Fe.a})))}}return t.\u0275fac=function(e){return new(e||t)(s.Xb(je.a),s.Xb(r.h),s.Xb(a.e))},t.\u0275prov=s.Ib({token:t,factory:t.\u0275fac}),t})(),en=(()=>{class t{constructor(t,e){this.actions$=t,this.store=e}}return t.\u0275fac=function(e){return new(e||t)(s.Xb(je.a),s.Xb(r.h))},t.\u0275prov=s.Ib({token:t,factory:t.\u0275fac}),t})();var nn=n("3Pt+"),rn=n("01hP"),an=n("5Ky6"),sn=n("SSqQ");function on(t,e){if(1&t){const t=s.Ub();s.Tb(0,"mat-checkbox",9),s.bc("ngModelChange",(function(n){s.sc(t);const i=e.index;return s.fc().toggleColumn.emit(i)})),s.zc(1),s.Rb()}if(2&t){const t=e.$implicit;s.lc("ngModel",t.included),s.zb(1),s.Bc(" ",t.name," ")}}function cn(t,e){if(1&t&&(s.Tb(0,"th",13),s.zc(1),s.Rb()),2&t){const t=s.fc().$implicit;s.zb(1),s.Ac(t)}}function ln(t,e){if(1&t&&(s.Tb(0,"td",14),s.zc(1),s.Rb()),2&t){const t=e.$implicit,n=s.fc().$implicit;s.zb(1),s.Ac(t[n])}}function un(t,e){1&t&&(s.Qb(0,10),s.yc(1,cn,2,1,"th",11),s.yc(2,ln,2,1,"td",12),s.zc(3,"> "),s.Pb()),2&t&&s.lc("matColumnDef",e.$implicit)}function hn(t,e){1&t&&s.Nb(0,"tr",15)}function fn(t,e){1&t&&s.Nb(0,"tr",16)}let dn=(()=>{class t{constructor(){this.rows=[],this.tableColumns=[],this.toggleColumn=new s.m}set columns(t){this._columns=t,this.tableColumns=t.filter(t=>t.included).map(t=>t.name)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Gb({type:t,selectors:[["ds-parse-result-viewer"]],inputs:{rows:"rows",columns:"columns"},outputs:{toggleColumn:"toggleColumn"},decls:11,vars:5,consts:[[1,"mat-h3","fields-title"],[1,"fields","mat-elevation-z4"],[3,"ngModel","ngModelChange",4,"ngFor","ngForOf"],[1,"mat-h3","data-title"],[1,"table-wrapper","mat-elevation-z4"],["mat-table","",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"ngModel","ngModelChange"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(s.Tb(0,"h3",0),s.zc(1,"Fields"),s.Rb(),s.Tb(2,"div",1),s.yc(3,on,2,2,"mat-checkbox",2),s.Rb(),s.Tb(4,"h3",3),s.zc(5,"Data"),s.Rb(),s.Tb(6,"div",4),s.Tb(7,"table",5),s.yc(8,un,4,1,"ng-container",6),s.yc(9,hn,1,0,"tr",7),s.yc(10,fn,1,0,"tr",8),s.Rb(),s.Rb()),2&t&&(s.zb(3),s.lc("ngForOf",e._columns),s.zb(4),s.lc("dataSource",e.rows),s.zb(1),s.lc("ngForOf",e.tableColumns),s.zb(1),s.lc("matHeaderRowDef",e.tableColumns),s.zb(1),s.lc("matRowDefColumns",e.tableColumns))},directives:[Kt.l,ae.j,ae.g,ae.i,sn.a,nn.g,nn.h,ae.c,ae.e,ae.b,ae.d,ae.a,ae.f,ae.h],styles:["[_nghost-%COMP%]{display:grid;grid-template:auto auto/auto 1fr;grid-column-gap:24px}[_nghost-%COMP%]     .mat-cell, [_nghost-%COMP%]     .mat-header-cell{padding:12px}.table-wrapper[_ngcontent-%COMP%]{grid-area:2/2;overflow-x:scroll}table[_ngcontent-%COMP%]{min-width:-webkit-max-content;min-width:-moz-max-content;min-width:max-content}.fields[_ngcontent-%COMP%]{padding:12px;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;grid-area:2/1}.fields-title[_ngcontent-%COMP%]{grid-area:1/1}.data-title[_ngcontent-%COMP%]{grid-area:1/2}h3.mat-h3[_ngcontent-%COMP%]{margin-bottom:6px}"],changeDetection:0}),t})(),mn=(()=>{class t{constructor(t,e){this.store=e,this.reader=new FileReader,this.showProgress=!1,this.progress=-1,this.previewSubscription=null,this.file=null,this.fileGroup=t.group({filePreviewReady:[null,nn.j.requiredTrue]}),this.filePreview$=this.store.select(Be),this.columns$=this.store.select(He)}get progressMode(){return this.progress<0?"indeterminate":"determinate"}ngOnInit(){}ngAfterViewInit(){this.previewSubscription=this.filePreview$.subscribe(t=>{setTimeout(()=>{this.fileGroup.patchValue({filePreviewReady:!!t}),t&&0===this.stepper.selectedIndex&&this.stepper.next()})})}ngOnDestroy(){this.previewSubscription&&this.previewSubscription.unsubscribe(),this.store.dispatch(Ne())}fileSelected(t){this.file=t,t&&this.store.dispatch(ke({file:t}))}saveDataset(){this.store.dispatch(Ce())}onToggleColumn(t){this.store.dispatch(Re({index:t}))}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(nn.b),s.Mb(r.h))},t.\u0275cmp=s.Gb({type:t,selectors:[["ds-new-dataset"]],viewQuery:function(t,e){var n;1&t&&s.vc(rn.c,!0),2&t&&s.pc(n=s.cc())&&(e.stepper=n.first)},decls:11,vars:10,consts:[[3,"linear","selectedIndex"],["stepper",""],["label","Choose data file",3,"stepControl"],[3,"ngModel","ngModelChange"],["label","Preview data"],[3,"rows","columns","toggleColumn"],[1,"actions"],["mat-stroked-button","","color","primary",3,"click"]],template:function(t,e){if(1&t&&(s.Tb(0,"mat-vertical-stepper",0,1),s.Tb(2,"mat-step",2),s.Tb(3,"ds-file-chooser",3),s.bc("ngModelChange",(function(t){return e.fileSelected(t)})),s.Rb(),s.Rb(),s.Tb(4,"mat-step",4),s.Tb(5,"ds-parse-result-viewer",5),s.bc("toggleColumn",(function(t){return e.onToggleColumn(t)})),s.gc(6,"async"),s.gc(7,"async"),s.Rb(),s.Tb(8,"div",6),s.Tb(9,"button",7),s.bc("click",(function(t){return e.saveDataset()})),s.zc(10,"Save Dataset"),s.Rb(),s.Rb(),s.Rb(),s.Rb()),2&t){var n;const t=null==(n=s.hc(6,6,e.filePreview$))?null:n.data;s.lc("linear",!0)("selectedIndex",0),s.zb(2),s.lc("stepControl",e.fileGroup),s.zb(1),s.lc("ngModel",e.file),s.zb(2),s.lc("rows",t)("columns",s.hc(7,8,e.columns$))}},directives:[rn.c,rn.a,an.a,nn.g,nn.h,dn,Jt.b],pipes:[Kt.b],styles:["[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:stretch;align-items:stretch}mat-vertical-stepper[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1}input[type=file][_ngcontent-%COMP%]{display:none}.actions[_ngcontent-%COMP%]{margin-top:16px}"]}),t})();var pn=n("lJxs");let gn=(()=>{class t{constructor(t,e){this.store=t,this.router=e}canActivate(){return this.store.select(Ut).pipe(Object(pn.a)(t=>!!t||this.router.parseUrl("/datasets")))}}return t.\u0275fac=function(e){return new(e||t)(s.Xb(r.h),s.Xb(a.e))},t.\u0275prov=s.Ib({token:t,factory:t.\u0275fac}),t})();var bn=n("jhN1"),yn=n("gVAx");function vn(t,e){if(1&t&&(s.Tb(0,"div",4),s.Tb(1,"div",5),s.zc(2),s.gc(3,"number"),s.Rb(),s.Rb()),2&t){const t=e.$implicit;s.xc("top",t.position,"%"),s.zb(2),s.Bc(" ",s.ic(3,2,t.value,"0.0-3")," ")}}const wn=function(t,e){return{height:t,"grid-area":e}};function xn(t,e){if(1&t&&(s.Nb(0,"div",11),s.gc(1,"number")),2&t){const t=e.$implicit,n=s.fc().index;s.lc("ngStyle",s.oc(5,wn,t.height+"%","1 / hcol-start "+(n+1)))("matTooltip",s.ic(1,2,t.frequency,"0.0-3"))}}function _n(t,e){if(1&t&&(s.Qb(0),s.yc(1,xn,2,8,"div",10),s.Pb()),2&t){const t=e.$implicit;s.zb(1),s.lc("ngForOf",t.values)}}function kn(t,e){if(1&t&&(s.Qb(0),s.Tb(1,"div",6),s.Tb(2,"span",7),s.zc(3),s.Rb(),s.Tb(4,"span",8),s.zc(5),s.Rb(),s.Rb(),s.yc(6,_n,2,1,"ng-container",9),s.Pb()),2&t){const t=s.fc();s.zb(3),s.Ac(null==t.histogram[0]?null:t.histogram[0].lowerBound),s.zb(2),s.Ac(null==t.histogram[(null==t.histogram?null:t.histogram.length)-1]?null:t.histogram[(null==t.histogram?null:t.histogram.length)-1].upperBound),s.zb(1),s.lc("ngForOf",null==t._data?null:t._data.histogram)}}function On(t,e){if(1&t&&(s.Nb(0,"div",11),s.gc(1,"number")),2&t){const t=e.$implicit,n=s.fc().index;s.lc("ngStyle",s.oc(5,wn,t.height+"%","1 / ccol-start "+(n+1)))("matTooltip",s.ic(1,2,t.frequency,"0.0-3"))}}const Mn=function(t){return{"grid-area":t}};function Cn(t,e){if(1&t&&(s.Qb(0),s.yc(1,On,2,8,"div",10),s.Tb(2,"div",13),s.zc(3),s.Rb(),s.Pb()),2&t){const t=e.$implicit,n=e.index;s.zb(1),s.lc("ngForOf",t.values),s.zb(1),s.lc("ngStyle",s.nc(3,Mn,"2 / ccol-start "+(n+1))),s.zb(1),s.Bc(" ",t.label," ")}}function Rn(t,e){if(1&t&&(s.Qb(0),s.Nb(1,"div",12),s.yc(2,Cn,4,5,"ng-container",9),s.Pb()),2&t){const t=s.fc();s.zb(2),s.lc("ngForOf",t.categories)}}let Nn=(()=>{class t{constructor(t){this.sanitizer=t,this.histogram=null,this.categories=null,this.categoryOffset=3}set data(t){this._data=t,this.histogram=t.histogram,this.categories=t.categories,this.gridTemplateColumns=this.sanitizer.bypassSecurityTrustStyle("30px auto "+(this.histogram&&this.histogram.length?`repeat(${this.histogram.length}, [hcol-start] 1fr [hcol-end]) `:"")+(this.categories&&this.categories.length?`repeat(${this.categories.length}, [ccol-start] 1fr [ccol-end])`:""))}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(bn.b))},t.\u0275cmp=s.Gb({type:t,selectors:[["ds-column-chart"]],hostBindings:function(t,e,n){1&t&&s.Ab(1),2&t&&s.xc("grid-template-columns",e.gridTemplateColumns)},inputs:{data:"data"},decls:6,vars:4,consts:[[1,"y-axis"],["class","y-tick",3,"top",4,"ngFor","ngForOf"],[1,"y-axis-label"],[4,"ngIf"],[1,"y-tick"],[1,"label"],[1,"axis","histogram-axis"],[1,"lower-bound"],[1,"upper-bound"],[4,"ngFor","ngForOf"],["class","bar","matTooltipPosition","right",3,"ngStyle","matTooltip",4,"ngFor","ngForOf"],["matTooltipPosition","right",1,"bar",3,"ngStyle","matTooltip"],[1,"axis","category-axis"],[1,"category-label",3,"ngStyle"]],template:function(t,e){1&t&&(s.Nb(0,"div",0),s.yc(1,vn,4,5,"div",1),s.Tb(2,"div",2),s.zc(3),s.Rb(),s.yc(4,kn,7,3,"ng-container",3),s.yc(5,Rn,3,1,"ng-container",3)),2&t&&(s.zb(1),s.lc("ngForOf",null==e._data?null:e._data.yTicks),s.zb(2),s.Bc(" ",null==e._data?null:e._data.yLabel,""),s.zb(1),s.lc("ngIf",e.histogram),s.zb(1),s.lc("ngIf",e.categories))},directives:[Kt.l,Kt.m,Kt.n,yn.a],pipes:[Kt.f],styles:['[_nghost-%COMP%]{display:grid;grid-template-rows:1fr auto;grid-gap:8px}.y-axis[_ngcontent-%COMP%]{grid-area:1/2;border-right:1px solid #444;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:end;align-items:flex-end;padding-right:10px}.y-tick[_ngcontent-%COMP%]{grid-area:1/2;padding-right:12px;height:0;position:relative;text-align:right}.y-tick[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{-webkit-transform:translateY(-10px);transform:translateY(-10px)}.y-tick[_ngcontent-%COMP%]::after{position:absolute;right:0;top:0;content:"";border-top:1px solid #444;width:5px;height:0}.y-axis-label[_ngcontent-%COMP%]{grid-area:1/1;-webkit-transform:rotate(-90deg) translateY(-25px);transform:rotate(-90deg) translateY(-25px);align-self:center;justify-self:start}.axis[_ngcontent-%COMP%]{position:relative;border-top:1px solid #444}.axis[_ngcontent-%COMP%]::before{content:"";position:absolute;display:block;top:0;left:0;height:5px;border-left:1px solid #444}.axis[_ngcontent-%COMP%]::after{content:"";position:absolute;display:block;top:0;right:0;height:5px;border-right:1px solid #444}.category-axis[_ngcontent-%COMP%]{grid-area:2/ccol-start/2/ccol-end -1}.histogram-axis[_ngcontent-%COMP%]{display:-webkit-box;display:flex;grid-area:2/hcol-start/2/hcol-end -1;-webkit-box-align:center;align-items:center}.histogram-axis[_ngcontent-%COMP%]   .lower-bound[_ngcontent-%COMP%]{margin:12px 0;-webkit-transform:translateX(-3px);transform:translateX(-3px)}.histogram-axis[_ngcontent-%COMP%]   .upper-bound[_ngcontent-%COMP%]{margin:12px 0 12px auto;-webkit-transform:translateX(3px);transform:translateX(3px)}.bar[_ngcontent-%COMP%]{justify-self:center;align-self:end;width:100%;max-width:150px}.category-label[_ngcontent-%COMP%]{align-self:center;justify-self:center;margin:12px;text-align:center}'],changeDetection:0}),t})(),Tn=(()=>{class t{constructor(t){this.store=t,this.column$=this.store.select(Qt),this.chartData$=this.store.select(Xt)}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(r.h))},t.\u0275cmp=s.Gb({type:t,selectors:[["ds-column"]],decls:8,vars:6,consts:[[1,"mat-h2"],["mat-icon-button","","routerLink","../..",1,"back"],["color","accent"],[3,"data"]],template:function(t,e){1&t&&(s.Tb(0,"h2",0),s.Tb(1,"a",1),s.Tb(2,"mat-icon",2),s.zc(3,"arrow_back"),s.Rb(),s.Rb(),s.zc(4),s.gc(5,"async"),s.Rb(),s.Nb(6,"ds-column-chart",3),s.gc(7,"async")),2&t&&(s.zb(4),s.Bc(" ",s.hc(5,2,e.column$).name,"\n"),s.zb(2),s.lc("data",s.hc(7,4,e.chartData$)))},directives:[Jt.a,a.g,Wt.a,Nn],pipes:[Kt.b],styles:["[_nghost-%COMP%]{padding:12px;-webkit-box-flex:1;flex:1;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}ds-column-chart[_ngcontent-%COMP%]{margin:12px;-webkit-box-flex:1;flex:1}h2[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}h2[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{margin-right:8px}"]}),t})();n.d(e,"DatasetsModule",(function(){return jn}));const zn=[{path:"",children:[{path:"",component:ne},{path:"new",component:mn},{path:":datasetId",canActivate:[gn],children:[{path:"",component:_e},{path:"column/:columnId",component:Tn}]}]}];let jn=(()=>{class t{}return t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({factory:function(e){return new(e||t)},providers:[gn],imports:[[i.a,a.h.forChild(zn),r.j.forFeature("datasets",g),je.c.forFeature([en]),r.j.forFeature("newDataset",ze),je.c.forFeature([tn])]]}),t})()},NpuA:function(t,e,n){var i,r;void 0===(r="function"==typeof(i=function t(){"use strict";var e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},n=!e.document&&!!e.postMessage,i=n&&/blob:/i.test((e.location||{}).protocol),r={},a=0,s={parse:function(n,i){var o=(i=i||{}).dynamicTyping||!1;if(x(o)&&(i.dynamicTypingFunction=o,o={}),i.dynamicTyping=o,i.transform=!!x(i.transform)&&i.transform,i.worker&&s.WORKERS_SUPPORTED){var c=function(){if(!s.WORKERS_SUPPORTED)return!1;var n,i,o=(n=e.URL||e.webkitURL||null,i=t.toString(),s.BLOB_URL||(s.BLOB_URL=n.createObjectURL(new Blob(["(",i,")();"],{type:"text/javascript"})))),c=new e.Worker(o);return c.onmessage=g,c.id=a++,r[c.id]=c}();return c.userStep=i.step,c.userChunk=i.chunk,c.userComplete=i.complete,c.userError=i.error,i.step=x(i.step),i.chunk=x(i.chunk),i.complete=x(i.complete),i.error=x(i.error),delete i.worker,void c.postMessage({input:n,config:i,workerId:c.id})}var d=null;return"string"==typeof n?d=i.download?new l(i):new h(i):!0===n.readable&&x(n.read)&&x(n.on)?d=new f(i):(e.File&&n instanceof File||n instanceof Object)&&(d=new u(i)),d.stream(n)},unparse:function(t,e){var n=!1,i=!0,r=",",a="\r\n",o='"',c=o+o,l=!1,u=null;!function(){if("object"==typeof e){if("string"!=typeof e.delimiter||s.BAD_DELIMITERS.filter((function(t){return-1!==e.delimiter.indexOf(t)})).length||(r=e.delimiter),("boolean"==typeof e.quotes||"function"==typeof e.quotes||Array.isArray(e.quotes))&&(n=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(l=e.skipEmptyLines),"string"==typeof e.newline&&(a=e.newline),"string"==typeof e.quoteChar&&(o=e.quoteChar),"boolean"==typeof e.header&&(i=e.header),Array.isArray(e.columns)){if(0===e.columns.length)throw new Error("Option columns is empty");u=e.columns}void 0!==e.escapeChar&&(c=e.escapeChar+o)}}();var h=new RegExp(m(o),"g");if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return d(null,t,l);if("object"==typeof t[0])return d(u||f(t[0]),t,l)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:f(t.data[0])),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),d(t.fields||[],t.data||[],l);throw new Error("Unable to serialize unrecognized input");function f(t){if("object"!=typeof t)return[];var e=[];for(var n in t)e.push(n);return e}function d(t,e,n){var s="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var o=Array.isArray(t)&&0<t.length,c=!Array.isArray(e[0]);if(o&&i){for(var l=0;l<t.length;l++)0<l&&(s+=r),s+=p(t[l],l);0<e.length&&(s+=a)}for(var u=0;u<e.length;u++){var h=o?t.length:e[u].length,f=!1,d=o?0===Object.keys(e[u]).length:0===e[u].length;if(n&&!o&&(f="greedy"===n?""===e[u].join("").trim():1===e[u].length&&0===e[u][0].length),"greedy"===n&&o){for(var m=[],g=0;g<h;g++)m.push(e[u][c?t[g]:g]);f=""===m.join("").trim()}if(!f){for(var b=0;b<h;b++)0<b&&!d&&(s+=r),s+=p(e[u][o&&c?t[b]:b],b);u<e.length-1&&(!n||0<h&&!d)&&(s+=a)}}return s}function p(t,e){if(null==t)return"";if(t.constructor===Date)return JSON.stringify(t).slice(1,25);var i=t.toString().replace(h,c);return"boolean"==typeof n&&n||"function"==typeof n&&n(t,e)||Array.isArray(n)&&n[e]||function(t,e){for(var n=0;n<e.length;n++)if(-1<t.indexOf(e[n]))return!0;return!1}(i,s.BAD_DELIMITERS)||-1<i.indexOf(r)||" "===i.charAt(0)||" "===i.charAt(i.length-1)?o+i+o:i}}};if(s.RECORD_SEP=String.fromCharCode(30),s.UNIT_SEP=String.fromCharCode(31),s.BYTE_ORDER_MARK="\ufeff",s.BAD_DELIMITERS=["\r","\n",'"',s.BYTE_ORDER_MARK],s.WORKERS_SUPPORTED=!n&&!!e.Worker,s.NODE_STREAM_INPUT=1,s.LocalChunkSize=10485760,s.RemoteChunkSize=5242880,s.DefaultDelimiter=",",s.Parser=p,s.ParserHandle=d,s.NetworkStreamer=l,s.FileStreamer=u,s.StringStreamer=h,s.ReadableStreamStreamer=f,e.jQuery){var o=e.jQuery;o.fn.parse=function(t){var n=t.config||{},i=[];return this.each((function(t){if("INPUT"!==o(this).prop("tagName").toUpperCase()||"file"!==o(this).attr("type").toLowerCase()||!e.FileReader||!this.files||0===this.files.length)return!0;for(var r=0;r<this.files.length;r++)i.push({file:this.files[r],inputElem:this,instanceConfig:o.extend({},n)})})),r(),this;function r(){if(0!==i.length){var e,n,r,c=i[0];if(x(t.before)){var l=t.before(c.file,c.inputElem);if("object"==typeof l){if("abort"===l.action)return e=c.file,n=c.inputElem,r=l.reason,void(x(t.error)&&t.error({name:"AbortError"},e,n,r));if("skip"===l.action)return void a();"object"==typeof l.config&&(c.instanceConfig=o.extend(c.instanceConfig,l.config))}else if("skip"===l)return void a()}var u=c.instanceConfig.complete;c.instanceConfig.complete=function(t){x(u)&&u(t,c.file,c.inputElem),a()},s.parse(c.file,c.instanceConfig)}else x(t.complete)&&t.complete()}function a(){i.splice(0,1),r()}}}function c(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(t){var e=v(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new d(e),(this._handle.streamer=this)._config=e}).call(this,t),this.parseChunk=function(t,n){if(this.isFirstChunk&&x(this._config.beforeFirstChunk)){var r=this._config.beforeFirstChunk(t);void 0!==r&&(t=r)}this.isFirstChunk=!1,this._halted=!1;var a=this._partialLine+t;this._partialLine="";var o=this._handle.parse(a,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var c=o.meta.cursor;this._finished||(this._partialLine=a.substring(c-this._baseIndex),this._baseIndex=c),o&&o.data&&(this._rowCount+=o.data.length);var l=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(i)e.postMessage({results:o,workerId:s.WORKER_ID,finished:l});else if(x(this._config.chunk)&&!n){if(this._config.chunk(o,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);o=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(o.data),this._completeResults.errors=this._completeResults.errors.concat(o.errors),this._completeResults.meta=o.meta),this._completed||!l||!x(this._config.complete)||o&&o.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),l||o&&o.meta.paused||this._nextChunk(),o}this._halted=!0},this._sendError=function(t){x(this._config.error)?this._config.error(t):i&&this._config.error&&e.postMessage({workerId:s.WORKER_ID,error:t,finished:!1})}}function l(t){var e;(t=t||{}).chunkSize||(t.chunkSize=s.RemoteChunkSize),c.call(this,t),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),n||(e.onload=w(this._chunkLoaded,this),e.onerror=w(this._chunkError,this)),e.open("GET",this._input,!n),this._config.downloadRequestHeaders){var t=this._config.downloadRequestHeaders;for(var i in t)e.setRequestHeader(i,t[i])}this._config.chunkSize&&e.setRequestHeader("Range","bytes="+this._start+"-"+(this._start+this._config.chunkSize-1));try{e.send()}catch(t){this._chunkError(t.message)}n&&0===e.status&&this._chunkError()}},this._chunkLoaded=function(){4===e.readyState&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:e.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(t){var e=t.getResponseHeader("Content-Range");return null===e?-1:parseInt(e.substring(e.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(t){this._sendError(new Error(e.statusText||t))}}function u(t){var e,n;(t=t||{}).chunkSize||(t.chunkSize=s.LocalChunkSize),c.call(this,t);var i="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,n=t.slice||t.webkitSlice||t.mozSlice,i?((e=new FileReader).onload=w(this._chunkLoaded,this),e.onerror=w(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var r=Math.min(this._start+this._config.chunkSize,this._input.size);t=n.call(t,this._start,r)}var a=e.readAsText(t,this._config.encoding);i||this._chunkLoaded({target:{result:a}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function h(t){var e;c.call(this,t=t||{}),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t,n=this._config.chunkSize;return n?(t=e.substring(0,n),e=e.substring(n)):(t=e,e=""),this._finished=!e,this.parseChunk(t)}}}function f(t){c.call(this,t=t||{});var e=[],n=!0,i=!1;this.pause=function(){c.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){c.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){i&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):n=!0},this._streamData=w((function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(t){this._streamError(t)}}),this),this._streamError=w((function(t){this._streamCleanUp(),this._sendError(t)}),this),this._streamEnd=w((function(){this._streamCleanUp(),i=!0,this._streamData("")}),this),this._streamCleanUp=w((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function d(t){var e,n,i,r=Math.pow(2,53),a=-r,o=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,c=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,l=this,u=0,h=0,f=!1,d=!1,g=[],b={data:[],errors:[],meta:{}};if(x(t.step)){var y=t.step;t.step=function(e){if(b=e,k())_();else{if(_(),0===b.data.length)return;u+=e.data.length,t.preview&&u>t.preview?n.abort():(b.data=b.data[0],y(b,l))}}}function w(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function _(){if(b&&i&&(M("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+s.DefaultDelimiter+"'"),i=!1),t.skipEmptyLines)for(var e=0;e<b.data.length;e++)w(b.data[e])&&b.data.splice(e--,1);return k()&&function(){if(b)if(Array.isArray(b.data[0])){for(var e=0;k()&&e<b.data.length;e++)b.data[e].forEach(n);b.data.splice(0,1)}else b.data.forEach(n);function n(e){x(t.transformHeader)&&(e=t.transformHeader(e)),g.push(e)}}(),function(){if(!b||!t.header&&!t.dynamicTyping&&!t.transform)return b;function e(e,n){var i,r=t.header?{}:[];for(i=0;i<e.length;i++){var a=i,s=e[i];t.header&&(a=i>=g.length?"__parsed_extra":g[i]),t.transform&&(s=t.transform(s,a)),s=O(a,s),"__parsed_extra"===a?(r[a]=r[a]||[],r[a].push(s)):r[a]=s}return t.header&&(i>g.length?M("FieldMismatch","TooManyFields","Too many fields: expected "+g.length+" fields but parsed "+i,h+n):i<g.length&&M("FieldMismatch","TooFewFields","Too few fields: expected "+g.length+" fields but parsed "+i,h+n)),r}var n=1;return!b.data.length||Array.isArray(b.data[0])?(b.data=b.data.map(e),n=b.data.length):b.data=e(b.data,0),t.header&&b.meta&&(b.meta.fields=g),h+=n,b}()}function k(){return t.header&&0===g.length}function O(e,n){return i=e,t.dynamicTypingFunction&&void 0===t.dynamicTyping[i]&&(t.dynamicTyping[i]=t.dynamicTypingFunction(i)),!0===(t.dynamicTyping[i]||t.dynamicTyping)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&(function(t){if(o.test(t)){var e=parseFloat(t);if(a<e&&e<r)return!0}return!1}(n)?parseFloat(n):c.test(n)?new Date(n):""===n?null:n):n;var i}function M(t,e,n,i){var r={type:t,code:e,message:n};void 0!==i&&(r.row=i),b.errors.push(r)}this.parse=function(r,a,o){if(t.newline||(t.newline=function(t,e){t=t.substring(0,1048576);var n=new RegExp(m(e)+"([^]*?)"+m(e),"gm"),i=(t=t.replace(n,"")).split("\r"),r=t.split("\n");if(1===i.length||1<r.length&&r[0].length<i[0].length)return"\n";for(var a=0,s=0;s<i.length;s++)"\n"===i[s][0]&&a++;return a>=i.length/2?"\r\n":"\r"}(r,t.quoteChar||'"')),i=!1,t.delimiter)x(t.delimiter)&&(t.delimiter=t.delimiter(r),b.meta.delimiter=t.delimiter);else{var c=function(e,n,i,r,a){var o,c,l,u;a=a||[",","\t","|",";",s.RECORD_SEP,s.UNIT_SEP];for(var h=0;h<a.length;h++){var f=a[h],d=0,m=0,g=0;l=void 0;for(var b=new p({comments:r,delimiter:f,newline:n,preview:10}).parse(e),y=0;y<b.data.length;y++)if(i&&w(b.data[y]))g++;else{var v=b.data[y].length;m+=v,void 0!==l?0<v&&(d+=Math.abs(v-l),l=v):l=v}0<b.data.length&&(m/=b.data.length-g),(void 0===c||d<=c)&&(void 0===u||u<m)&&1.99<m&&(c=d,o=f,u=m)}return{successful:!!(t.delimiter=o),bestDelimiter:o}}(r,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);c.successful?t.delimiter=c.bestDelimiter:(i=!0,t.delimiter=s.DefaultDelimiter),b.meta.delimiter=t.delimiter}var l=v(t);return t.preview&&t.header&&l.preview++,e=r,n=new p(l),b=n.parse(e,a,o),_(),f?{meta:{paused:!0}}:b||{meta:{paused:!1}}},this.paused=function(){return f},this.pause=function(){f=!0,n.abort(),e=x(t.chunk)?"":e.substring(n.getCharIndex())},this.resume=function(){l.streamer._halted?(f=!1,l.streamer.parseChunk(e,!0)):setTimeout(this.resume,3)},this.aborted=function(){return d},this.abort=function(){d=!0,n.abort(),b.meta.aborted=!0,x(t.complete)&&t.complete(b),e=""}}function m(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function p(t){var e,n=(t=t||{}).delimiter,i=t.newline,r=t.comments,a=t.step,o=t.preview,c=t.fastMode,l=e=void 0===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(l=t.escapeChar),("string"!=typeof n||-1<s.BAD_DELIMITERS.indexOf(n))&&(n=","),r===n)throw new Error("Comment character same as delimiter");!0===r?r="#":("string"!=typeof r||-1<s.BAD_DELIMITERS.indexOf(r))&&(r=!1),"\n"!==i&&"\r"!==i&&"\r\n"!==i&&(i="\n");var u=0,h=!1;this.parse=function(t,s,f){if("string"!=typeof t)throw new Error("Input must be a string");var d=t.length,p=n.length,g=i.length,b=r.length,y=x(a),v=[],w=[],_=[],k=u=0;if(!t)return I();if(c||!1!==c&&-1===t.indexOf(e)){for(var O=t.split(i),M=0;M<O.length;M++){if(u+=(_=O[M]).length,M!==O.length-1)u+=i.length;else if(f)return I();if(!r||_.substring(0,b)!==r){if(y){if(v=[],A(_.split(n)),q(),h)return I()}else A(_.split(n));if(o&&o<=M)return v=v.slice(0,o),I(!0)}}return I()}for(var C=t.indexOf(n,u),R=t.indexOf(i,u),N=new RegExp(m(l)+m(e),"g"),T=t.indexOf(e,u);;)if(t[u]!==e)if(r&&0===_.length&&t.substring(u,u+b)===r){if(-1===R)return I();R=t.indexOf(i,u=R+g),C=t.indexOf(n,u)}else{if(-1!==C&&(C<R||-1===R)){if(!(C<T)){_.push(t.substring(u,C)),C=t.indexOf(n,u=C+p);continue}var z=F(C,T,R);if(z&&void 0!==z.nextDelim){T=z.quoteSearch,_.push(t.substring(u,C=z.nextDelim)),C=t.indexOf(n,u=C+p);continue}}if(-1===R)break;if(_.push(t.substring(u,R)),P(R+g),y&&(q(),h))return I();if(o&&v.length>=o)return I(!0)}else for(T=u,u++;;){if(-1===(T=t.indexOf(e,T+1)))return f||w.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:v.length,index:u}),D();if(T===d-1)return D(t.substring(u,T).replace(N,e));if(e!==l||t[T+1]!==l){if(e===l||0===T||t[T-1]!==l){-1!==C&&C<T+1&&(C=t.indexOf(n,T+1)),-1!==R&&R<T+1&&(R=t.indexOf(i,T+1));var j=E(-1===R?C:Math.min(C,R));if(t[T+1+j]===n){_.push(t.substring(u,T).replace(N,e)),t[u=T+1+j+p]!==e&&(T=t.indexOf(e,u)),C=t.indexOf(n,u),R=t.indexOf(i,u);break}var S=E(R);if(t.substring(T+1+S,T+1+S+g)===i){if(_.push(t.substring(u,T).replace(N,e)),P(T+1+S+g),C=t.indexOf(n,u),T=t.indexOf(e,u),y&&(q(),h))return I();if(o&&v.length>=o)return I(!0);break}w.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:v.length,index:u}),T++}}else T++}return D();function A(t){v.push(t),k=u}function E(e){var n=0;if(-1!==e){var i=t.substring(T+1,e);i&&""===i.trim()&&(n=i.length)}return n}function D(e){return f||(void 0===e&&(e=t.substring(u)),_.push(e),u=d,A(_),y&&q()),I()}function P(e){u=e,A(_),_=[],R=t.indexOf(i,u)}function I(t){return{data:v,errors:w,meta:{delimiter:n,linebreak:i,aborted:h,truncated:!!t,cursor:k+(s||0)}}}function q(){a(I()),v=[],w=[]}function F(i,r,a){var s={nextDelim:void 0,quoteSearch:void 0},o=t.indexOf(e,r+1);if(r<i&&i<o&&(o<a||-1===a)){var c=t.indexOf(n,o);if(-1===c)return s;o<c&&(o=t.indexOf(e,o+1)),s=F(c,o,a)}else s={nextDelim:i,quoteSearch:r};return s}},this.abort=function(){h=!0},this.getCharIndex=function(){return u}}function g(t){var e=t.data,n=r[e.workerId],i=!1;if(e.error)n.userError(e.error,e.file);else if(e.results&&e.results.data){var a={abort:function(){i=!0,b(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:y,resume:y};if(x(n.userStep)){for(var s=0;s<e.results.data.length&&(n.userStep({data:e.results.data[s],errors:e.results.errors,meta:e.results.meta},a),!i);s++);delete e.results}else x(n.userChunk)&&(n.userChunk(e.results,a,e.file),delete e.results)}e.finished&&!i&&b(e.workerId,e.results)}function b(t,e){var n=r[t];x(n.userComplete)&&n.userComplete(e),n.terminate(),delete r[t]}function y(){throw new Error("Not implemented.")}function v(t){if("object"!=typeof t||null===t)return t;var e=Array.isArray(t)?[]:{};for(var n in t)e[n]=v(t[n]);return e}function w(t,e){return function(){t.apply(e,arguments)}}function x(t){return"function"==typeof t}return i&&(e.onmessage=function(t){var n=t.data;if(void 0===s.WORKER_ID&&n&&(s.WORKER_ID=n.workerId),"string"==typeof n.input)e.postMessage({workerId:s.WORKER_ID,results:s.parse(n.input,n.config),finished:!0});else if(e.File&&n.input instanceof File||n.input instanceof Object){var i=s.parse(n.input,n.config);i&&e.postMessage({workerId:s.WORKER_ID,results:i,finished:!0})}}),(l.prototype=Object.create(c.prototype)).constructor=l,(u.prototype=Object.create(c.prototype)).constructor=u,(h.prototype=Object.create(h.prototype)).constructor=h,(f.prototype=Object.create(c.prototype)).constructor=f,s})?i.apply(e,[]):i)||(t.exports=r)}}]);